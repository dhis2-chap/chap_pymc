name: torch-deep

meta_data:
  author: Knut Rand
  author_note: >
      HMC might take a while to converge, especially with many covariates.
  author_assessed_status: red
  contact_email: knutdrand@gmail.com
  description: >
    This model is a HMC based adaption of inla models that allows for predicting without knowing future covariates.
  display_name: HMC Model
  organization: HISP Centre, University of Oslo
  organization_logo_url: https://landportal.org/sites/default/files/2024-03/university_of_oslo_logo.png
  citation_info: >
    Climate Health Analytics Platform. 2025. "Torch Deep Learning Model".
    HISP Centre, University of Oslo.
    https://dhis2-chap.github.io/chap-core/external_models/overview_of_supported_models.html

allow_free_additional_continuous_covariates: true
required_covariates:
- population
supported_period_type: any
target: disease_cases
user_options:
  additional_covariates:
    default:
    - rainfall
    - mean_temperature
    items:
      type: string
    title: Additional Covariates
    type: array
  tune:
    default: 100
    title: Tune
    type: integer
  draws:
    default: 100
    title: Draws
    type: integer
  chains:
    default: 4
    title: Chains
    type: integer
  use_seasonal_effects:
    default: false
    title: Use Seasonal Effects
    type: boolean
  seasonal_periods:
    default: 12
    title: Seasonal Periods
    type: integer
  seasonal_sigma_base:
    default: 1.0
    title: Base Seasonal Effect Sigma
    type: number
  seasonal_sigma_loc:
    default: 0.5
    title: Location Seasonal Effect Sigma
    type: number
  use_location_effects:
    default: false
    title: Use Location Random Effects
    type: boolean
  location_sigma:
    default: 1.0
    title: Location Random Effect Sigma
    type: number

entry_points:
  train:
    command: python chap_pymc/models/seasonal_regression.py train {train_data} {model} {model_config}
    parameters:
      train_data: str
      model: str
      model_config: str
  predict:
    command: python chap_pymc/models/seasonal_regression.py predict {model} {historic_data} {future_data} {out_file}
      {model_config}
    parameters:
      model: str
      historic_data: str
      future_data: str
      out_file: str
      model_config: str

python_env: pyenv.yaml